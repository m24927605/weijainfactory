<!DOCTYPE html>
<html lang="en">
<head>
<%include ./master/master_head.ejs %>
</head><!--/head-->
<body>
<%include ./master/menu.ejs %>

    <section class="container">
        <div class="row">
            <div class="col-sm-12"><h1>機械設備</h1></div>
        </div>
         <div class="col-sm-12">
            <div id="mycarousel" class="carousel slide" data-ride="carousel">
                <ol class="carousel-indicators"></ol>
                <!-- 廣告輪播列表 -->
                  <div class="carousel-inner" role="listbox">
                    <div class="item">
                        <img src="images/machines/DOWELL HR600AND.jpg" data-color="#eee" alt="DOWELL HR600AND">
                        <div class="carousel-caption">
                            <h3>DOWELL HR600AND</h3>
                        </div>
                    </div>
                    <div class="item">
                        <img src="images/machines/HURISE D2.jpg" data-color="#eee" alt="DOWELL HR600AND">
                        <div class="carousel-caption">
                            <h3>HURISE D2</h3>
                        </div>
                    </div>
                    <div class="item active">
                        <img src="images/machines/STUDER S33.jpg" data-color="#eee" alt="STUDER S33">
                        <div class="carousel-caption">
                            <h3>STUDER S33</h3>
                        </div>
                    </div>
                  </div>

                  <!-- Controls -->
                  <a class="left carousel-control" href="#mycarousel" role="button" data-slide="prev">
                    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                    <span class="sr-only">上一個</span>
                  </a>
                  <a class="right carousel-control" href="#mycarousel" role="button" data-slide="next">
                    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                    <span class="sr-only">下一個</span>
                  </a>
            </div>
        </div>
    </section><!--/#portfolio-->

<%include ./master/footer.ejs %>
<%include ./master/bodyend.ejs %>
<script type="text/javascript">
    $(function(){
    var $item = $('.carousel .item'); 
    var $wHeight = $(window).height();
    $item.height($wHeight); 
    $item.addClass('full-screen');

    $('.carousel img').each(function() {
      var src = $(this).attr('src');
      var $color = $(this).attr('data-color');
      var domainname='';
      domainname=window.location.hostname+'/';
      var imgsrc='';
      imgsrc=domainname+src;
      console.log(imgsrc);
      $(this).parent().css({
        'background-image' : 'url(' +imgsrc+ ')',
        'background-color' : $color
      });
      $(this).remove();
    });

    //下方自動加入控制圓鈕
    var total = $('.carousel .carousel-inner div.item').size();
    append_li();
    function append_li()
    {
        var li = "";
        var get_ac = $( ".carousel .active" );
        var ac =  $( ".carousel .carousel-inner div" ).index( get_ac );

        for (var i=0; i <= total-1; i++){
            if(i == (ac)/2){
                li += "<li data-target='#mycarousel' data-slide-to='"+i+"' class='active'></li>";                   
            }else{
                li += "<li data-target='#mycarousel' data-slide-to='"+i+"' class=''></li>";                     
                }
            }
            $(".carousel-indicators").append(li);
        }

    //單則隱藏控制鈕
    if ($('.carousel .carousel-inner div.item').length < 2 ) { 
            $('.carousel-indicators, .carousel-control').hide();
    }

    //縮放視窗調整視窗高度
    $(window).on('resize', function (){
      $wHeight = $(window).height();
      $item.height($wHeight);
    });

    //輪播秒數與滑入停止
    $('.carousel').carousel({
      interval: 5000,
      pause: "hover"
    });
});
</script>
</body>
</html>
